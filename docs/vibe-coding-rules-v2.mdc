# Vibe Coding Rules & Standards (live doc)

[Rule Update Logs](https://www.notion.so/Rule-Update-Logs-270b60a291ed805fa808f3ad0c23152c?pvs=21)

## Core Philosophy

**Stay in control of your codebase and design decisions through disciplined documentation and versioning.**

**Guiding Principles:**

1. **Delete, delete, delete** → The best feature is no feature. Ask "What happens if we don't build this at all?"
2. **Keep it as simple as possible** → Straightforward over clever. Readable beats short.
3. **Build only when needed** → Do not add features on speculation.
4. **Write for humans first** → Clever code is bad code.
5. **The five-minute rule** → If you cannot explain it quickly, it is too complex.

---

## Rule 1: Vibe Coding Logs (Mandatory)

### What: Maintain a coding log for every project

- **Location**: `/docs/vibe-log.md` in project root
- **Update frequency**: After every major change or coding session
- **Format**: Date + Time, change summary, reasoning, impact
- **Timestamp Format**: `YYYY-MM-DD HH:MM` (24-hour format)
- **Whenever you get context on the project always log your thoughts here first t**

### Template:

```markdown
## 2025-09-15 14:30 - Database Decision
**Change**: Switched from Airtable to Firestore
**Why**: Custom forms needed, API rate limits, real-time requirements
**Impact**: Need to rebuild admin dashboard, better performance expected
**Files affected**: /src/database/, /docs/design-doc-v2.md

```

### Examples of "Major Changes":

- Architecture decisions (database, framework, hosting)
- API integrations or removals
- UI/UX design system updates
- Security or authentication changes
- Performance optimizations
- Third-party service additions/removals

---

## Rule 2: Documentation Structure (Mandatory)

Documentation

- **Location**: `/docs/`
- **Purpose**: App-specific documentation and development logs
- **Contents**:
    - `vibe-log.md` - App-specific development history
    - `agent-discussions.md` - App-specific AI conversations
    - `README.md` - App setup and usage instructions

---

## Rule 3: Design Doc Updates (Mandatory)

### Version every design document update

- **Naming**: `design-doc-v1.md`, `design-doc-v2.md`, etc. Never update the design doc.
- **This will be versioned manually only:** you will create update `design-update-vx.md` according to what version of the design doc we are on.
- **Keep old versions**: Never delete, maintain history

### Don’t touch the archive folder it is there fore human reference.

### Sample Entry Format

```markdown
## Update: vX.Y - 2025-09-16 11:25
- Wants "Copy Client Form Link" button **only inside editor**, not on dashboard.  
- Button text should read: "Copy Client Form Link".  
- Reinforces that design doc must reflect all new instructions provided by the team.

```

---

## Rule 5: Decision Documentation

### Document the "why" behind every major decision

- **Log in Updates and Discussions:** Must include this in the `agent-discussions.md` file and log the decision in the [`design-updates-vx.md`](http://design-updates-vx.md) file once agreed and implemented
- **Tech choices**: Why Firebase over AWS? Why React over Vue?
- **Design patterns**: Why this folder structure? Why this naming convention?
- **Integrations**: Why this payment processor? Why this API?

### Format:

```markdown
## Decision: [Title] - 2025-09-15 14:30
**Context**: What problem were we solving?
**Options**: What did we consider?
**Decision**: What did we choose and why?
**Consequences**: What are the trade-offs?

```

---

## Rule 5: Project-Level Structure

```
/Users/seanx/code/flyjetr 2.0/
.cursor/rules/
  ├── core.txt
  ├── firebase-rules.txt
  └── react-rules.txt
├── docs/                          # Project documentation (OUTSIDE app folders)
│   ├── design-doc-v1.md          # System design documents
│   ├── vibe-coding-rules.md      # This file
│   ├── vibe-log.md               # Project development log
│   └── agent-discussions.md      # AI conversation log
├── flyjetr-app/                  # Main React app (flyjetr.com)
│   ├── src/
│   └── README.md
├── admin-app/                    # Future admin app (admin.flyjetr.com)
└── shared/                       # Shared utilities, types, etc.

```

### App-Level Structure (within each app folder)

```

/src
  ├── components/
  ├── pages/
  ├── utils/
  └── config/
/tests
README.md

```

### File Naming & Code Standards

- **Components**: PascalCase (`TripCreationForm.jsx`)
- **Utilities**: camelCase (`formatDate.js`)
- **Pages**: PascalCase (`Dashboard.jsx`)
- **Config**: lowercase (`firebase.config.js`)

### Code Quality Standards

- **Max file size**: 500 lines (refactor if larger)
- **Max function size**: 50 lines (break down if larger)
- **Max nesting levels**: 3 (prefer early returns)
- **Function naming**: Descriptive over short (`calculateTripCost()` not `calc()`)
- **Comments for multi-step flows**:
    
    ```jsx
    // 1️⃣ Validate passenger data ----
    // 2️⃣ Save to Firestore ----
    // 3️⃣ Send confirmation email ----
    
    ```
    

---

## Rule 6: Commit Standards

### Meaningful commit messages

```
feat: add passenger profile form
fix: resolve Firebase auth redirect
docs: update design doc to v2
refactor: simplify trip creation workflow

```

### Commit frequency

- Commit working code daily minimum
- Don't commit broken builds
- Include relevant files in each commit

---

## Rule 7: Dependency Management

### Don't reinvent what already exists

- Choose proven libraries over custom solutions
- Prefer boring, stable tech over cutting edge
- **Why added**: What problem does it solve?
- **Alternatives considered**: What else was evaluated?
- **Risk assessment**: Vendor lock-in, maintenance, security

### Examples for your stack:

- ✅ Firebase (proven, Google-backed)
- ✅ React Hook Form (battle-tested forms)
- ✅ Tailwind CSS (utility-first, stable)
- ❌ Custom auth system (use Firebase Auth)
- ❌ Custom database ORM (use Firebase SDK)

### Regular audits

- Monthly dependency review
- Update security patches immediately
- Remove unused dependencies

---

## Rule 8: Error Handling Philosophy

### Fail fast and simple

- Validate only uncertain inputs (user data, API responses, file uploads)
- Don't over-validate internal code you control
- Log errors with context, not just stack traces
- Use meaningful error messages for users

### Examples:

```jsx
// ✅ Good - validate user input, clear naming, single responsibility
const validatePassengerData = (passengerForm) => {
  if (!passengerForm.name?.trim()) {
    throw new Error('Passenger name is required');
  }
  if (!passengerForm.email?.includes('@')) {
    throw new Error('Valid email address required');
  }
};

// ❌ Bad - over-validating internal code, cryptic naming
const validate = (data) => {
  if (!data) throw new Error('Data required'); // Unnecessary validation
  // ... complex validation logic
};

```

### The "Understandable in 30 Seconds" Rule

- If code takes longer than 30 seconds to understand, rewrite it
- Use whitespace between logical groups
- Prefer verbose, clear code over terse, cryptic code

---

## Rule 9: Testing Philosophy

### Test what matters

- Critical user flows (trip creation, payment processing)
- Data validation (passenger info, flight details)
- Integration points (Firebase, payment APIs)

### Don't over-test

- Skip unit tests for simple utilities
- Focus on integration and E2E tests
- Test user experience, not implementation details

---

## Rule 10: Performance Monitoring

### Establish baselines

- Page load times
- API response times
- Database query performance
- User action completion rates

### Track in vibe log

```markdown
## 2025-09-15 15:30 - Performance Baseline
**Forms**: Average 300ms load time
**Dashboard**: 1.2s initial load
**File upload**: 2s average for passport images

```

---

## Rule 11: Security Standards

### Never commit secrets

- Use environment variables
- Document required env vars in README
- Use `.gitignore` properly

### Regular security reviews

- Monthly credential rotation
- Dependency vulnerability scans
- Access control audits

---

## Rule 12: Agent Discussions & Learning Log

### What: Document every meaningful conversation with coding agents

- **Location**: `/docs/agent-discussions.md` in project root
- **Update frequency**: After any technical discussion or recommendation request
- **Purpose**: Capture learning, avoid asking the same questions twice

### Template:

```markdown
## 2025-09-15 14:30 - Database Selection Discussion

**Context**: Choosing between Airtable vs Firestore for custom forms
**Agent**: Claude Sonnet 4
**Duration**: ~20 minutes
**Timestamp**: 2025-09-15 14:30 - 14:50

### Question Asked:
"Should I use Firestore or Airtable for my jet charter management system with custom React forms?"

### Key Recommendations:
1. **Firestore over Airtable** - Better for custom interfaces
2. **API rate limits** - Airtable's 5 req/sec would throttle forms
3. **Real-time updates** - Firestore provides instant sync
4. **Firebase ecosystem** - Aligns with Google-only stack

### Decision Made:
Switched to Firestore as primary database

### Learning/Insights:
- Airtable is great for ops teams but terrible for custom apps
- Always consider rate limits when building user-facing interfaces
- Firebase Admin SDK gives server-side superpowers for ops team

### Files Updated:
- `design-doc-v2.md` - Updated database architecture
- `vibe-log.md` - Added database switch reasoning

### Follow-up Questions to Explore:
- How to structure Firestore collections for complex relationships?
- Best practices for Firebase Security Rules?

```

### Discussion Categories:

- **Architecture decisions** - Database, hosting, framework choices
- **Technical patterns** - How to structure code, components, data
- **Tool evaluations** - Library comparisons, service selections
- **Problem solving** - Debugging approaches, optimization strategies
- **Best practices** - Coding standards, security, performance

### Benefits of Agent Discussion Logs:

1. **Avoid repeated questions** - Check if you've already discussed this topic
2. **Track decision reasoning** - Remember why you chose one approach over another
3. **Build personal knowledge base** - Accumulate learning over time
4. **Pattern recognition** - Identify recurring themes in your technical decisions
5. **Agent context** - Help future conversations by referencing past discussions

### Integration with Other Rules:

- Cross-reference with **Vibe Log** for implementation details
- Link to **Design Doc versions** when architecture changes
- Update **Decision Documentation** with agent recommendations

---

## Rule 13: Backup & Recovery

### Multiple backup strategies

- **Code**: Git + GitHub/GitLab
- **Database**: Automated backups enabled
- **Files**: Cloud storage with versioning
- **Docs**: Version controlled with code

### Recovery testing

- Quarterly backup restoration tests
- Document recovery procedures
- Test disaster recovery scenarios

---

## Implementation Checklist

### Every New Project:

- [ ]  Create `/docs/vibe-log.md`
- [ ]  Create `/docs/agent-discussions.md`
- [ ]  Create initial `design-updates-v1.md`
- [ ]  Set up proper folder structure
- [ ]  Configure `.gitignore`
- [ ]  Document tech stack decisions
- [ ]  Set up automated backups

### Every Major Change:

- [ ]  Update vibe log with reasoning
- [ ]  Log agent discussions that led to decisions
- [ ]  Notify user that it’s good time for a version update after major changes
- [ ]  Update README if setup changes
- [ ]  Commit with descriptive message
- [ ]  Consider impact on existing features

---

## Benefits

**For You:**

- Never forget why you made a decision
- Easy to onboard new team members
- Quick context switching between projects
- Historical record of what works/doesn't work

**For The Business:**

- Faster debugging and troubleshooting
- Easier handoffs and collaboration
- Reduced technical debt
- Better decision-making with historical context

**Remember**: These rules exist to help you code with confidence and maintain control over your projects. Adapt them as needed, but always document why.